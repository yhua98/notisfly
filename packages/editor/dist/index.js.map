{"version":3,"file":"index.js","sourceRoot":"","sources":["../src/index.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,MAAM,KAAK,CAAC;AAChC,OAAO,EAAE,MAAM,EAAE,MAAM,0BAA0B,CAAC;AAClD,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,KAAK,EAAE,MAAM,mBAAmB,CAAC;AACnE,OAAO,EAAE,UAAU,EAAE,MAAM,qBAAqB,CAAC;AACjD,OAAO,EAAE,OAAO,IAAI,cAAc,EAAE,MAAM,6BAA6B,CAAC;AACxE,OAAO,EAAE,OAAO,IAAI,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAEtE,OAAO,EAAE,aAAa,EAAE,cAAc,EAAE,MAAM,0BAA0B,CAAC;AACzE,OAAO,EAAE,iBAAiB,EAAE,MAAM,uBAAuB,CAAC;AAC1D,gDAAgD;AAChD,OAAO,KAAK,CAAC,MAAM,KAAK,CAAC;AACzB,OAAO,EAAE,KAAK,EAAE,MAAM,YAAY,CAAA;AAElC,cAAc,EAAE,CAAC;AACjB,aAAa,EAAE,CAAC;IAGH,SAAS;4BADrB,aAAa,CAAC,YAAY,CAAC;;;;sBACG,aAAa,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;yBAAxD,SAAQ,WAAgD;;;;gCA6C7E,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;sCAG1B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;gCAG9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;+BAG9B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;iCAwC9B,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;sCAG1B,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;iCAG3B,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;sCAS9B,KAAK,CAAC,OAAO,EAAE,KAAK,CAAC;YA/DtB,iKAAS,IAAI,6BAAJ,IAAI,mFAAW;YAGxB,mLAAS,UAAU,6BAAV,UAAU,+FAAa;YAGhC,iKAAS,IAAI,6BAAJ,IAAI,mFAAgB;YAG7B,8JAAS,GAAG,6BAAH,GAAG,iFAAO;YAwCnB,oKAAkB,KAAK,6BAAL,KAAK,qFAAM;YAG7B,mLAAS,UAAU,6BAAV,UAAU,+FAAS;YAG5B,oKAAS,KAAK,6BAAL,KAAK,qFAAU;YASxB,mLAAS,UAAU,6BAAV,UAAU,+FAAoB;YA9GxC,6KAmIC;;;;iBAlIgB,WAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EA0C3B,AA1CqB,CA0CrB;QAGD,qEAAgB,OAAO,EAAC;QAAxB,IAAS,IAAI,0CAAW;QAAxB,IAAS,IAAI,gDAAW;QAGxB,6IAAgC;QAAhC,IAAS,UAAU,gDAAa;QAAhC,IAAS,UAAU,sDAAa;QAGhC,8HAA0B,EAAE,GAAC;QAA7B,IAAS,IAAI,0CAAgB;QAA7B,IAAS,IAAI,gDAAgB;QAG7B,+HAAmB;QAAnB,IAAS,GAAG,yCAAO;QAAnB,IAAS,GAAG,+CAAO;QAEnB,MAAM,CAAC,GAAQ;YACd,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;YACf,IAAI,CAAC,GAAG,EAAE,CAAC;gBACV,OAAM;YACP,CAAC;YACD,IAAI,CAAC,KAAK,GAAG,SAAgB,CAAC;YAC9B,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;YAC3C,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAS,MAAM,CAAC,CAAC,OAAO,EAAE,CAAC;YAC5D,IAAI,CAAC,UAAU,CAAC,GAAG,GAAG,GAAG,CAAC;YAE1B,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC;gBACrB,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;YAC/C,CAAC;YAED,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QACrC,CAAC;QAEQ,iBAAiB;YACzB,KAAK,CAAC,iBAAiB,EAAE,CAAC;YAC1B,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;YAEzB,IAAI,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;gBAC/C,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;YAC/C,CAAC;QACF,CAAC;QAEO,MAAM,CAAC,KAAoB;YAClC,MAAM,MAAM,GAAG,KAAK,CAAC,MAA0B,CAAC;YAChD,MAAM,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC;YAC3B,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,EAAE,QAAQ,CAAC,QAAQ,CAAS,MAAM,CAAC,CAAC;YACzD,IAAI,EAAE,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACpB,IAAI,CAAC,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;YAClC,MAAM,CAAC,KAAK,GAAG,EAAE,CAAC;YAClB,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,GAAG,EAAE,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAC;YACtD,wBAAwB;QACzB,CAAC;QAGD,yHAA0B,EAAE,GAAC;QAA7B,IAAkB,KAAK,2CAAM;QAA7B,IAAkB,KAAK,iDAAM;QAG7B,qIAAsB,KAAK,GAAC;QAA5B,IAAS,UAAU,gDAAS;QAA5B,IAAS,UAAU,sDAAS;QAG5B,yIAAwB;QAAxB,IAAS,KAAK,2CAAU;QAAxB,IAAS,KAAK,iDAAU;QAExB,QAAQ,CAAC,KAAiB;YACzB,IAAI,CAAC,KAAK,GAAI,KAAK,CAAC,MAA2B,CAAC,KAAK,CAAC;YACtD,IAAI,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;YACzC,IAAI,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QACnC,CAAC;QAGD,8IAAuC;QAAvC,IAAS,UAAU,gDAAoB;QAAvC,IAAS,UAAU,sDAAoB;QAE9B,MAAM;YACd,OAAO,IAAI,CAAA;;sCAEyB,IAAI,CAAC,QAAQ;;;MAG7C,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,IAAI,CAAA,sBAAsB,GAAG,SAAS,CAAC;qBACjE,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC;;;MAG5C,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,UAAU;;eAElB,CAAC;QACf,CAAC;QAED;YACC,KAAK,EAAE,CAAC;;YACR,IAAI,CAAC,UAAU,GAAG,IAAI,UAAU,EAAE,CAAC;SACnC;;YAlIW,uDAAS;;;;;SAAT,SAAS","sourcesContent":["import { css, html } from 'lit';\r\nimport { repeat } from 'lit/directives/repeat.js';\r\nimport { customElement, property, query } from 'lit/decorators.js';\r\nimport { PageEditor } from '@blocksuite/presets';\r\nimport { effects as presetsEffects } from '@blocksuite/presets/effects';\r\nimport { effects as blocksEffects } from '@blocksuite/blocks/effects';\r\nimport type { Doc } from '@blocksuite/store';\r\nimport { SignalWatcher, WithDisposable } from '@blocksuite/global/utils';\r\nimport { ShadowlessElement } from '@blocksuite/block-std';\r\n// import { RichText } from '@blocksuite/blocks'\r\nimport * as Y from 'yjs';\r\nimport { enter } from './event.js'\r\n\r\npresetsEffects();\r\nblocksEffects();\r\n\r\n@customElement('not-editor')\r\nexport class NotEditor extends SignalWatcher(WithDisposable(ShadowlessElement)) {\r\n\tstatic override styles = css`\r\n\t:host {\r\n\t\tpadding: 24px;\r\n\t}\r\n\r\n\t.editor-container{\r\n\t\tpadding: 24px;\r\n\t}\r\n\r\n\t.tags {\r\n\t\t\r\n\t\tpadding-left: 16px;\r\n\t}\r\n\r\n\t.tags > input {\r\n\t\toutline: none;\r\n\t\tbackground: transparent;\r\n\t\twidth: 4em;\r\n\t\tpadding: 2px 8px;\r\n\t\tborder: 1px solid #2200aa;\r\n\t\tborder-radius: 8px;\r\n\t}\r\n\r\n\t.tag {\r\n\t\tmargin-left: 4px;\r\n\t}\r\n\t.tag:first-child{\r\n\t\tmargin-left: 0;\r\n\t}\r\n\t.tag:first-child {\r\n\t\tmargin-left: 0;\r\n\t\tpadding-left: 0;\r\n\t}\r\n\t.title {\r\n\t\tmargin-bottom: 16px;\r\n\t}\r\n\t.title > input {\r\n\t\tbackground: transparent;\r\n\t\toutline: none;\r\n\t\tpadding: 0 16px;\r\n\t\tfont-size: 20px;\r\n\t}\r\n\t`\r\n\r\n\t@property({ type: String })\r\n\taccessor name = 'world';\r\n\r\n\t@property({ attribute: false })\r\n\taccessor pageEditor: PageEditor;\r\n\r\n\t@property({ attribute: false })\r\n\taccessor tags: string[] = [];\r\n\r\n\t@property({ attribute: false })\r\n\taccessor doc!: Doc;\r\n\r\n\tsetDoc(doc: Doc) {\r\n\t\tthis.doc = doc;\r\n\t\tif (!doc) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.yText = undefined as any;\r\n\t\tthis.yText = doc.spaceDoc.getText('title');\r\n\t\tthis.tags = doc.spaceDoc.getArray<string>('tags').toArray();\r\n\t\tthis.pageEditor.doc = doc;\r\n\r\n\t\tif (this.titleInput) {\r\n\t\t\tthis.titleInput.value = this.yText.toString();\r\n\t\t}\r\n\r\n\t\tconsole.log('doc', this.titleInput);\r\n\t}\r\n\r\n\toverride connectedCallback() {\r\n\t\tsuper.connectedCallback();\r\n\t\tconsole.log('connected');\r\n\r\n\t\tif (this.doc && this.titleInput && this.yText) {\r\n\t\t\tthis.titleInput.value = this.yText.toString();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate addTag(event: KeyboardEvent) {\r\n\t\tconst target = event.target as HTMLInputElement;\r\n\t\tconst value = target.value;\r\n\t\tconst tags = this.doc?.spaceDoc.getArray<string>('tags');\r\n\t\ttags?.push([value]);\r\n\t\tthis.tags = [...this.tags, value];\r\n\t\ttarget.value = '';\r\n\t\tconsole.log(value, tags, this.doc?.spaceDoc.toJSON());\r\n\t\t// this.requestUpdate();\r\n\t}\r\n\r\n\t@property({ type: String })\r\n\toverride accessor title = '';\r\n\r\n\t@property({ type: Boolean })\r\n\taccessor isReadonly = false;\r\n\r\n\t@property({ attribute: false })\r\n\taccessor yText!: Y.Text;\r\n\r\n\tsetTitle(event: InputEvent) {\r\n\t\tthis.title = (event.target as HTMLInputElement).value;\r\n\t\tthis.yText?.delete(0, this.yText.length);\r\n\t\tthis.yText?.insert(0, this.title);\r\n\t}\r\n\r\n\t@query('input', false)\r\n\taccessor titleInput!: HTMLInputElement;\r\n\r\n\toverride render() {\r\n\t\treturn html`<div class=\"editor-container\">\r\n\t\t\t<div class=\"title\">\r\n\t\t\t\t<input id=\"title-input\" @input=\"${this.setTitle}\" placeholder=\"标题\" />\r\n\t\t\t</div>\r\n            <div class=\"tags\">\r\n\t\t\t\t${repeat(this.tags, (tag) => tag, (tag) => html`<span class=\"tag\">#${tag}</span>`)}\r\n\t\t\t\t<input @keyup=\"${enter.call(this, this.addTag)}\" placeholder=\"+ tag\" />\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t${this.doc && this.pageEditor}\r\n\t\t\t</div>\r\n        </div>`;\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.pageEditor = new PageEditor();\r\n\t}\r\n}\r\n"]}